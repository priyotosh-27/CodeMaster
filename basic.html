<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elite Coding Challenges Pro - Extended</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --success: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
      --warning: linear-gradient(135deg, #fc4a1a 0%, #f7b733 100%);
      --danger: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
      --bg-light: #f8faff;
      --bg-dark: #0d1117;
      --text-light: #2d3748;
      --text-dark: #e2e8f0;
      --card-light: rgba(255, 255, 255, 0.9);
      --card-dark: rgba(30, 41, 59, 0.9);
      --glass-light: rgba(255, 255, 255, 0.25);
      --glass-dark: rgba(0, 0, 0, 0.25);
      --shadow-light: 0 8px 32px rgba(31, 38, 135, 0.15);
      --shadow-dark: 0 8px 32px rgba(0, 0, 0, 0.3);
      --border-light: rgba(255, 255, 255, 0.18);
      --border-dark: rgba(255, 255, 255, 0.1);
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-light);
      color: var(--text-light);
      transition: all 0.3s ease;
      line-height: 1.6;
      overflow-x: hidden;
    }

    body.dark {
      background: var(--bg-dark);
      color: var(--text-dark);
    }

    /* Animated background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
      z-index: -1;
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0px) rotate(0deg);
      }

      33% {
        transform: translateY(-20px) rotate(1deg);
      }

      66% {
        transform: translateY(10px) rotate(-1deg);
      }
    }

    /* Header */
    .header {
      background: var(--glass-light);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-light);
      padding: 1.5rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: var(--shadow-light);
    }

    body.dark .header {
      background: var(--glass-dark);
      border-bottom: 1px solid var(--border-dark);
      box-shadow: var(--shadow-dark);
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.5rem;
      font-weight: 800;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo span {
      font-size: 2rem;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.1);
      }
    }

    .header-center {
      text-align: center;
    }

    .header-title {
      font-size: 2.5rem;
      font-weight: 900;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .header-subtitle {
      font-size: 1.1rem;
      opacity: 0.8;
      font-weight: 500;
    }

    .header-right {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .theme-toggle {
      background: var(--glass-light);
      border: 1px solid var(--border-light);
      backdrop-filter: blur(10px);
      color: var(--text-light);
      border-radius: 50px;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2rem;
    }

    body.dark .theme-toggle {
      background: var(--glass-dark);
      border-color: var(--border-dark);
      color: var(--text-dark);
    }

    .theme-toggle:hover {
      transform: scale(1.1) rotate(180deg);
    }

    .stats {
      display: flex;
      gap: 1rem;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .stat {
      padding: 0.5rem 1rem;
      background: var(--glass-light);
      border: 1px solid var(--border-light);
      border-radius: 25px;
      backdrop-filter: blur(10px);
    }

    body.dark .stat {
      background: var(--glass-dark);
      border-color: var(--border-dark);
    }

    /* New Feature: Achievement System */
    .achievement {
      position: fixed;
      top: 100px;
      right: 20px;
      background: var(--success);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      transform: translateX(300px);
      transition: transform 0.5s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
    }

    .achievement.show {
      transform: translateX(0);
    }

    /* Streak Counter */
    .streak-counter {
      background: var(--warning);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Navigation */
    .nav {
      background: var(--glass-light);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-light);
      padding: 1rem 2rem;
      position: sticky;
      top: 90px;
      z-index: 90;
    }

    body.dark .nav {
      background: var(--glass-dark);
      border-bottom-color: var(--border-dark);
    }

    .nav-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .tabs {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .tab {
      padding: 0.75rem 1.5rem;
      background: transparent;
      border: 2px solid transparent;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .tab::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--primary);
      transition: all 0.3s ease;
      z-index: -1;
    }

    .tab:hover::before,
    .tab.active::before {
      left: 0;
    }

    .tab:hover,
    .tab.active {
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }

    .filters {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .filter-label {
      font-size: 0.8rem;
      font-weight: 600;
      opacity: 0.7;
    }

    select,
    .search-input {
      padding: 0.6rem 1rem;
      border: 2px solid var(--border-light);
      border-radius: 15px;
      background: var(--glass-light);
      backdrop-filter: blur(10px);
      color: var(--text-light);
      font-size: 0.9rem;
      transition: all 0.3s ease;
      outline: none;
    }

    body.dark select,
    body.dark .search-input {
      background: var(--glass-dark);
      border-color: var(--border-dark);
      color: var(--text-dark);
    }

    select:focus,
    .search-input:focus {
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
    }

    /* New Feature: Study Plan */
    .study-plan {
      background: var(--glass-light);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-light);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow-light);
    }

    body.dark .study-plan {
      background: var(--glass-dark);
      border-color: var(--border-dark);
      box-shadow: var(--shadow-dark);
    }

    .study-plan-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .study-plan-title {
      font-size: 1.8rem;
      font-weight: 700;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .plan-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .plan-card {
      background: var(--glass-light);
      border: 2px solid var(--border-light);
      border-radius: 15px;
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    body.dark .plan-card {
      background: var(--glass-dark);
      border-color: var(--border-dark);
    }

    .plan-card:hover,
    .plan-card.selected {
      border-color: #667eea;
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
    }

    .plan-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .plan-name {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .plan-description {
      font-size: 0.9rem;
      opacity: 0.7;
      margin-bottom: 1rem;
    }

    .plan-duration {
      background: var(--accent);
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: 600;
      display: inline-block;
    }

    /* Timer Feature */
    .timer-section {
      background: var(--glass-light);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-light);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow-light);
      text-align: center;
    }

    body.dark .timer-section {
      background: var(--glass-dark);
      border-color: var(--border-dark);
      box-shadow: var(--shadow-dark);
    }

    .timer-display {
      font-size: 3rem;
      font-weight: 900;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1rem;
      font-family: 'Courier New', monospace;
    }

    .timer-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .timer-btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .timer-btn.start {
      background: var(--success);
      color: white;
    }

    .timer-btn.pause {
      background: var(--warning);
      color: white;
    }

    .timer-btn.reset {
      background: var(--danger);
      color: white;
    }

    .timer-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .timer-presets {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .preset-btn {
      padding: 0.5rem 1rem;
      background: var(--glass-light);
      border: 1px solid var(--border-light);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    body.dark .preset-btn {
      background: var(--glass-dark);
      border-color: var(--border-dark);
    }

    .preset-btn:hover {
      background: var(--accent);
      color: white;
    }

    /* Main content */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }

    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 800;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .section-subtitle {
      font-size: 1.1rem;
      opacity: 0.7;
    }

    /* Challenge grid */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    /* Cards */
    .card {
      background: var(--card-light);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-light);
      border-radius: 20px;
      padding: 2rem;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-light);
    }

    body.dark .card {
      background: var(--card-dark);
      border-color: var(--border-dark);
      box-shadow: var(--shadow-dark);
    }

    .card::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: var(--primary);
      border-radius: 20px;
      z-index: -1;
      opacity: 0;
      transition: all 0.3s ease;
    }

    /* .card:hover::before {
      opacity: 1;
    } */

    /* .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    } */

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1rem;
    }

    .card-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .card-description {
      font-size: 1rem;
      opacity: 0.8;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    .card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .tag {
      padding: 0.25rem 0.75rem;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: 600;
      color: white;
      background: var(--accent);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 700;
      color: white;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge.easy {
      background: var(--success);
    }

    .badge.medium {
      background: var(--warning);
    }

    .badge.hard {
      background: var(--danger);
    }

    .solved-indicator {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 30px;
      height: 30px;
      background: var(--success);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      animation: bounce 0.6s ease;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.2);
      }
    }

    .card-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: auto;
      padding-top: 1rem;
      border-top: 1px solid var(--border-light);
    }

    body.dark .card-actions {
      border-top-color: var(--border-dark);
    }

    .checkbox-wrapper {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
    }

    .checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #667eea;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      background: transparent;
    }

    .checkbox.checked {
      background: var(--success);
      border-color: transparent;
    }

    .checkbox.checked::after {
      content: '✓';
      color: white;
      font-weight: bold;
    }

    .external-btn {
      background: var(--accent);
      color: white;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .external-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    }

    /* Progress section */
    .progress-section {
      background: var(--glass-light);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-light);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow-light);
    }

    body.dark .progress-section {
      background: var(--glass-dark);
      border-color: var(--border-dark);
      box-shadow: var(--shadow-dark);
    }

    .progress-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .progress-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .progress-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
    }

    .progress-card {
      text-align: center;
      padding: 1.5rem;
      background: var(--glass-light);
      border: 1px solid var(--border-light);
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    body.dark .progress-card {
      background: var(--glass-dark);
      border-color: var(--border-dark);
    }

    .progress-number {
      font-size: 2.5rem;
      font-weight: 900;
      margin-bottom: 0.5rem;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .progress-label {
      font-size: 1rem;
      font-weight: 600;
      opacity: 0.8;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--glass-light);
      border-radius: 10px;
      overflow: hidden;
      margin: 1rem 0;
    }

    body.dark .progress-bar {
      background: var(--glass-dark);
    }

    .progress-fill {
      height: 100%;
      background: var(--success);
      border-radius: 10px;
      transition: width 1s ease;
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      opacity: 0.6;
    }

    .empty-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .empty-text {
      font-size: 1.2rem;
      font-weight: 600;
    }

    /* Leaderboard */
    .leaderboard {
      background: var(--glass-light);
      backdrop-filter: blur(20px);
      border: 1px solid var(--border-light);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow-light);
    }

    body.dark .leaderboard {
      background: var(--glass-dark);
      border-color: var(--border-dark);
      box-shadow: var(--shadow-dark);
    }

    .leaderboard-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      margin-bottom: 1rem;
      background: var(--glass-light);
      border-radius: 15px;
      border: 1px solid var(--border-light);
    }

    body.dark .leaderboard-item {
      background: var(--glass-dark);
      border-color: var(--border-dark);
    }

    .rank {
      font-size: 1.5rem;
      font-weight: 900;
      width: 50px;
      text-align: center;
    }

    .rank.gold {
      color: #ffd700;
    }

    .rank.silver {
      color: #c0c0c0;
    }

    .rank.bronze {
      color: #cd7f32;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }

      .header-title {
        font-size: 2rem;
      }

      .nav-content {
        flex-direction: column;
        gap: 1rem;
      }

      .tabs {
        justify-content: center;
      }

      .grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .card {
        padding: 1.5rem;
      }

      .progress-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 0.6s ease forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Loading animation */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid var(--glass-light);
      border-top: 4px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <!-- Achievement notification -->
  <div id="achievementNotification" class="achievement">
    <span>🎉</span>
    <span id="achievementText"></span>
  </div>

  <header class="header">
    <div class="header-content">
      <div class="logo">
        <span>🧠</span>
        <span>CodeMaster Pro</span>
      </div>
      <div class="header-center">
        <h1 class="header-title">Elite Coding Challenges</h1>
        <p class="header-subtitle">Master algorithms, ace interviews, level up your coding skills</p>
      </div>
      <div class="header-right">
        <div class="streak-counter">
          🔥 <span id="streakCount">0</span> day streak
        </div>
        <div class="stats">
          <div class="stat">
            <span id="totalSolved">0</span> Solved
          </div>
          <div class="stat">
            <span id="totalChallenges">0</span> Total
          </div>
        </div>
        <button class="theme-toggle" id="themeToggle">🌙</button>
      </div>
    </div>
  </header>

  <nav class="nav">
    <div class="nav-content">
      <div class="tabs">
        <button class="tab active" data-category="all">All Challenges</button>
        <button class="tab" data-category="arrays">Arrays</button>
        <button class="tab" data-category="strings">Strings</button>
        <button class="tab" data-category="linkedlist">Linked Lists</button>
        <button class="tab" data-category="trees">Trees</button>
        <button class="tab" data-category="graphs">Graphs</button>
        <button class="tab" data-category="dp">Dynamic Programming</button>
        <button class="tab" data-category="system">System Design</button>
      </div>
      <div class="filters">
        <div class="filter-group">
          <label class="filter-label">Difficulty</label>
          <select id="difficultyFilter">
            <option value="">All Levels</option>
            <option value="Easy">Easy</option>
            <option value="Medium">Medium</option>
            <option value="Hard">Hard</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label">Search</label>
          <input type="text" class="search-input" id="searchInput" placeholder="Search challenges...">
        </div>
      </div>
    </div>
  </nav>

  <div class="container">
    <!-- Study Plan Section -->
    <div class="study-plan">
      <div class="study-plan-header">
        <h2 class="study-plan-title">📚 Choose Your Study Plan</h2>
        <p>Structured learning paths to guide your coding journey</p>
      </div>
      <div class="plan-options">
        <div class="plan-card" data-plan="beginner">
          <div class="plan-icon">🌱</div>
          <div class="plan-name">Beginner Path</div>
          <div class="plan-description">Start with fundamentals and build confidence</div>
          <div class="plan-duration">4-6 weeks</div>
        </div>
        <div class="plan-card" data-plan="intermediate">
          <div class="plan-icon">🚀</div>
          <div class="plan-name">Interview Prep</div>
          <div class="plan-description">Focus on common interview questions</div>
          <div class="plan-duration">8-10 weeks</div>
        </div>
        <div class="plan-card" data-plan="advanced">
          <div class="plan-icon">⚡</div>
          <div class="plan-name">Advanced Algorithms</div>
          <div class="plan-description">Master complex algorithms and data structures</div>
          <div class="plan-duration">12-16 weeks</div>
        </div>
        <div class="plan-card" data-plan="competitive">
          <div class="plan-icon">🏆</div>
          <div class="plan-name">Competitive Programming</div>
          <div class="plan-description">Prepare for coding competitions</div>
          <div class="plan-duration">16+ weeks</div>
        </div>
      </div>
    </div>

    <!-- Pomodoro Timer Section -->
    <div class="timer-section">
      <h2 class="progress-title">🍅 Focus Timer</h2>
      <p style="margin-bottom: 2rem; opacity: 0.8;">Stay focused with the Pomodoro Technique</p>

      <div class="timer-display" id="timerDisplay">25:00</div>

      <div class="timer-controls">
        <button class="timer-btn start" id="startTimer">Start</button>
        <button class="timer-btn pause" id="pauseTimer">Pause</button>
        <button class="timer-btn reset" id="resetTimer">Reset</button>
      </div>

      <div class="timer-presets">
        <button class="preset-btn" data-minutes="25">Pomodoro (25m)</button>
        <button class="preset-btn" data-minutes="15">Short Break (15m)</button>
        <button class="preset-btn" data-minutes="30">Long Break (30m)</button>
        <button class="preset-btn" data-minutes="45">Deep Work (45m)</button>
      </div>
    </div>

    <!-- Progress Section -->
    <div class="progress-section">
      <div class="progress-header">
        <h2 class="progress-title">📊 Your Progress</h2>
        <p>Track your journey to coding mastery</p>
      </div>
      <div class="progress-grid">
        <div class="progress-card">
          <div class="progress-number" id="easyCount">0</div>
          <div class="progress-label">Easy Solved</div>
          <div class="progress-bar">
            <div class="progress-fill" id="easyProgress" style="width: 0%"></div>
          </div>
        </div>
        <div class="progress-card">
          <div class="progress-number" id="mediumCount">0</div>
          <div class="progress-label">Medium Solved</div>
          <div class="progress-bar">
            <div class="progress-fill" id="mediumProgress" style="width: 0%"></div>
          </div>
        </div>
        <div class="progress-card">
          <div class="progress-number" id="hardCount">0</div>
          <div class="progress-label">Hard Solved</div>
          <div class="progress-bar">
            <div class="progress-fill" id="hardProgress" style="width: 0%"></div>
          </div>
        </div>
        <div class="progress-card">
          <div class="progress-number" id="overallProgress">0%</div>
          <div class="progress-label">Overall Progress</div>
          <div class="progress-bar">
            <div class="progress-fill" id="overallProgressBar" style="width: 0%"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Leaderboard Section -->
    <div class="leaderboard">
      <div class="progress-header">
        <h2 class="progress-title">🏆 Personal Achievements</h2>
        <p>Your coding milestones and accomplishments</p>
      </div>
      <div id="achievementsList">
        <!-- Achievements will be populated by JavaScript -->
      </div>
    </div>

    <div class="section-header">
      <h2 class="section-title" id="sectionTitle">All Challenges</h2>
      <p class="section-subtitle" id="sectionSubtitle">Choose your next coding adventure</p>
    </div>

    <div id="challengeGrid" class="grid"></div>

    <div id="emptyState" class="empty-state hidden">
      <div class="empty-icon">🔍</div>
      <div class="empty-text">No challenges found matching your criteria</div>
    </div>
  </div>

  <script>
    // Comprehensive challenge database with additional categories
    const challenges = {
      arrays: [
        {
          title: "Two Sum",
          description: "Find two numbers in an array that add up to a specific target sum.",
          difficulty: "Easy",
          tags: ["Hash Table", "Array"],
          link: "https://leetcode.com/problems/two-sum/"
        },
        {
          title: "Best Time to Buy and Sell Stock",
          description: "Find the maximum profit from buying and selling stock once.",
          difficulty: "Easy",
          tags: ["Array", "Dynamic Programming"],
          link: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock/"
        },
        {
          title: "Contains Duplicate",
          description: "Check if any value appears at least twice in an array.",
          difficulty: "Easy",
          tags: ["Array", "Hash Table"],
          link: "https://leetcode.com/problems/contains-duplicate/"
        },
        {
          title: "Product of Array Except Self",
          description: "Return array where each element is product of all other elements.",
          difficulty: "Medium",
          tags: ["Array", "Prefix Sum"],
          link: "https://leetcode.com/problems/product-of-array-except-self/"
        },
        {
          title: "Maximum Subarray",
          description: "Find the contiguous subarray with the largest sum.",
          difficulty: "Medium",
          tags: ["Array", "Dynamic Programming"],
          link: "https://leetcode.com/problems/maximum-subarray/"
        },
        {
          title: "3Sum",
          description: "Find all unique triplets in array that sum to zero.",
          difficulty: "Medium",
          tags: ["Array", "Two Pointers"],
          link: "https://leetcode.com/problems/3sum/"
        },
        {
          title: "Container With Most Water",
          description: "Find two lines that form container holding the most water.",
          difficulty: "Medium",
          tags: ["Array", "Two Pointers"],
          link: "https://leetcode.com/problems/container-with-most-water/"
        },
        {
          title: "Trapping Rain Water",
          description: "Calculate how much water can be trapped after raining.",
          difficulty: "Hard",
          tags: ["Array", "Two Pointers", "Stack"],
          link: "https://leetcode.com/problems/trapping-rain-water/"
        },
        {
          title: "Find Minimum in Rotated Sorted Array",
          description: "Find the minimum element in a rotated sorted array.",
          difficulty: "Medium",
          tags: ["Array", "Binary Search"],
          link: "https://leetcode.com/problems/find-minimum-in-rotated-sorted-array/"
        },
        {
          title: "Search in Rotated Sorted Array",
          description: "Search for a target value in a rotated sorted array.",
          difficulty: "Medium",
          tags: ["Array", "Binary Search"],
          link: "https://leetcode.com/problems/search-in-rotated-sorted-array/"
        }
      ],
      strings: [
        {
          title: "Valid Anagram",
          description: "Check if two strings are anagrams of each other.",
          difficulty: "Easy",
          tags: ["String", "Hash Table"],
          link: "https://leetcode.com/problems/valid-anagram/"
        },
        {
          title: "Valid Parentheses",
          description: "Check if string has valid combination of parentheses.",
          difficulty: "Easy",
          tags: ["String", "Stack"],
          link: "https://leetcode.com/problems/valid-parentheses/"
        },
        {
          title: "Longest Palindromic Substring",
          description: "Find the longest palindromic substring in a string.",
          difficulty: "Medium",
          tags: ["String", "Dynamic Programming"],
          link: "https://leetcode.com/problems/longest-palindromic-substring/"
        },
        {
          title: "Group Anagrams",
          description: "Group strings that are anagrams of each other.",
          difficulty: "Medium",
          tags: ["String", "Hash Table"],
          link: "https://leetcode.com/problems/group-anagrams/"
        },
        {
          title: "Longest Substring Without Repeating Characters",
          description: "Find length of longest substring without repeating characters.",
          difficulty: "Medium",
          tags: ["String", "Sliding Window"],
          link: "https://leetcode.com/problems/longest-substring-without-repeating-characters/"
        },
        {
          title: "Valid Palindrome",
          description: "Check if string is a valid palindrome ignoring non-alphanumeric.",
          difficulty: "Easy",
          tags: ["String", "Two Pointers"],
          link: "https://leetcode.com/problems/valid-palindrome/"
        },
        {
          title: "Minimum Window Substring",
          description: "Find minimum window substring containing all characters of another string.",
          difficulty: "Hard",
          tags: ["String", "Sliding Window"],
          link: "https://leetcode.com/problems/minimum-window-substring/"
        },
        {
          title: "Palindromic Substrings",
          description: "Count how many palindromic substrings are in a string.",
          difficulty: "Medium",
          tags: ["String", "Dynamic Programming"],
          link: "https://leetcode.com/problems/palindromic-substrings/"
        }
      ],
      linkedlist: [
        {
          title: "Reverse Linked List",
          description: "Reverse a singly linked list iteratively and recursively.",
          difficulty: "Easy",
          tags: ["Linked List", "Recursion"],
          link: "https://leetcode.com/problems/reverse-linked-list/"
        },
        {
          title: "Merge Two Sorted Lists",
          description: "Merge two sorted linked lists into one sorted list.",
          difficulty: "Easy",
          tags: ["Linked List", "Recursion"],
          link: "https://leetcode.com/problems/merge-two-sorted-lists/"
        },
        {
          title: "Linked List Cycle",
          description: "Detect if linked list has a cycle using Floyd's algorithm.",
          difficulty: "Easy",
          tags: ["Linked List", "Two Pointers"],
          link: "https://leetcode.com/problems/linked-list-cycle/"
        },
        {
          title: "Remove Nth Node From End",
          description: "Remove the nth node from the end of linked list in one pass.",
          difficulty: "Medium",
          tags: ["Linked List", "Two Pointers"],
          link: "https://leetcode.com/problems/remove-nth-node-from-end-of-list/"
        },
        {
          title: "Add Two Numbers",
          description: "Add two numbers represented as linked lists.",
          difficulty: "Medium",
          tags: ["Linked List", "Math"],
          link: "https://leetcode.com/problems/add-two-numbers/"
        },
        {
          title: "Reorder List",
          description: "Reorder linked list to alternate between first and last nodes.",
          difficulty: "Medium",
          tags: ["Linked List", "Two Pointers"],
          link: "https://leetcode.com/problems/reorder-list/"
        },
        {
          title: "Merge k Sorted Lists",
          description: "Merge k sorted linked lists and return as one sorted list.",
          difficulty: "Hard",
          tags: ["Linked List", "Divide and Conquer"],
          link: "https://leetcode.com/problems/merge-k-sorted-lists/"
        }
      ],
      trees: [
        {
          title: "Maximum Depth of Binary Tree",
          description: "Find the maximum depth of a binary tree.",
          difficulty: "Easy",
          tags: ["Tree", "DFS", "BFS"],
          link: "https://leetcode.com/problems/maximum-depth-of-binary-tree/"
        },
        {
          title: "Same Tree",
          description: "Check if two binary trees are the same.",
          difficulty: "Easy",
          tags: ["Tree", "DFS"],
          link: "https://leetcode.com/problems/same-tree/"
        },
        {
          title: "Invert Binary Tree",
          description: "Invert a binary tree (swap left and right subtrees).",
          difficulty: "Easy",
          tags: ["Tree", "DFS"],
          link: "https://leetcode.com/problems/invert-binary-tree/"
        },
        {
          title: "Binary Tree Level Order Traversal",
          description: "Return level order traversal of binary tree nodes.",
          difficulty: "Medium",
          tags: ["Tree", "BFS"],
          link: "https://leetcode.com/problems/binary-tree-level-order-traversal/"
        },
        {
          title: "Validate Binary Search Tree",
          description: "Check if binary tree is a valid binary search tree.",
          difficulty: "Medium",
          tags: ["Tree", "DFS"],
          link: "https://leetcode.com/problems/validate-binary-search-tree/"
        },
        {
          title: "Lowest Common Ancestor of BST",
          description: "Find lowest common ancestor of two nodes in BST.",
          difficulty: "Medium",
          tags: ["Tree", "DFS"],
          link: "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/"
        },
        {
          title: "Binary Tree Maximum Path Sum",
          description: "Find maximum path sum in binary tree.",
          difficulty: "Hard",
          tags: ["Tree", "DFS"],
          link: "https://leetcode.com/problems/binary-tree-maximum-path-sum/"
        },
        {
          title: "Serialize and Deserialize Binary Tree",
          description: "Design algorithm to serialize and deserialize binary tree.",
          difficulty: "Hard",
          tags: ["Tree", "DFS", "Design"],
          link: "https://leetcode.com/problems/serialize-and-deserialize-binary-tree/"
        }
      ],
      graphs: [
        {
          title: "Number of Islands",
          description: "Count number of islands in 2D grid using DFS/BFS.",
          difficulty: "Medium",
          tags: ["Graph", "DFS", "BFS"],
          link: "https://leetcode.com/problems/number-of-islands/"
        },
        {
          title: "Clone Graph",
          description: "Return deep copy of undirected connected graph.",
          difficulty: "Medium",
          tags: ["Graph", "DFS", "BFS"],
          link: "https://leetcode.com/problems/clone-graph/"
        },
        {
          title: "Course Schedule",
          description: "Check if you can finish all courses (detect cycle in directed graph).",
          difficulty: "Medium",
          tags: ["Graph", "Topological Sort"],
          link: "https://leetcode.com/problems/course-schedule/"
        },
        {
          title: "Pacific Atlantic Water Flow",
          description: "Find coordinates where water can flow to both oceans.",
          difficulty: "Medium",
          tags: ["Graph", "DFS", "BFS"],
          link: "https://leetcode.com/problems/pacific-atlantic-water-flow/"
        },
        {
          title: "Graph Valid Tree",
          description: "Check if edges form a valid tree (connected and no cycles).",
          difficulty: "Medium",
          tags: ["Graph", "Union Find"],
          link: "https://leetcode.com/problems/graph-valid-tree/"
        },
        {
          title: "Word Ladder",
          description: "Find shortest transformation sequence from beginWord to endWord.",
          difficulty: "Hard",
          tags: ["Graph", "BFS"],
          link: "https://leetcode.com/problems/word-ladder/"
        }
      ],
      dp: [
        {
          title: "Climbing Stairs",
          description: "Find number of ways to climb n stairs (1 or 2 steps at a time).",
          difficulty: "Easy",
          tags: ["Dynamic Programming"],
          link: "https://leetcode.com/problems/climbing-stairs/"
        },
        {
          title: "House Robber",
          description: "Find maximum money you can rob without robbing adjacent houses.",
          difficulty: "Medium",
          tags: ["Dynamic Programming"],
          link: "https://leetcode.com/problems/house-robber/"
        },
        {
          title: "Coin Change",
          description: "Find minimum coins needed to make up amount.",
          difficulty: "Medium",
          tags: ["Dynamic Programming"],
          link: "https://leetcode.com/problems/coin-change/"
        },
        {
          title: "Longest Increasing Subsequence",
          description: "Find length of longest strictly increasing subsequence.",
          difficulty: "Medium",
          tags: ["Dynamic Programming", "Binary Search"],
          link: "https://leetcode.com/problems/longest-increasing-subsequence/"
        },
        {
          title: "Word Break",
          description: "Check if string can be segmented into dictionary words.",
          difficulty: "Medium",
          tags: ["Dynamic Programming"],
          link: "https://leetcode.com/problems/word-break/"
        },
        {
          title: "Unique Paths",
          description: "Find number of unique paths from top-left to bottom-right.",
          difficulty: "Medium",
          tags: ["Dynamic Programming"],
          link: "https://leetcode.com/problems/unique-paths/"
        },
        {
          title: "Edit Distance",
          description: "Find minimum operations to convert one string to another.",
          difficulty: "Hard",
          tags: ["Dynamic Programming"],
          link: "https://leetcode.com/problems/edit-distance/"
        }
      ],
      system: [
        {
          title: "LRU Cache",
          description: "Design and implement Least Recently Used cache.",
          difficulty: "Medium",
          tags: ["Design", "Hash Table", "Linked List"],
          link: "https://leetcode.com/problems/lru-cache/"
        },
        {
          title: "Design Twitter",
          description: "Design simplified version of Twitter with core features.",
          difficulty: "Medium",
          tags: ["Design", "Hash Table", "Heap"],
          link: "https://leetcode.com/problems/design-twitter/"
        },
        {
          title: "Implement Trie",
          description: "Implement trie (prefix tree) data structure.",
          difficulty: "Medium",
          tags: ["Design", "Trie"],
          link: "https://leetcode.com/problems/implement-trie-prefix-tree/"
        },
        {
          title: "Design Add and Search Words",
          description: "Design data structure supporting add and search with wildcards.",
          difficulty: "Medium",
          tags: ["Design", "Trie"],
          link: "https://leetcode.com/problems/design-add-and-search-words-data-structure/"
        },
        {
          title: "Design HashMap",
          description: "Design a HashMap without using built-in hash table libraries.",
          difficulty: "Easy",
          tags: ["Design", "Hash Table"],
          link: "https://leetcode.com/problems/design-hashmap/"
        },
        {
          title: "Time Based Key-Value Store",
          description: "Design time-based key-value data structure.",
          difficulty: "Medium",
          tags: ["Design", "Hash Table", "Binary Search"],
          link: "https://leetcode.com/problems/time-based-key-value-store/"
        }
      ]
    };

    // Enhanced state management
    let currentCategory = "all";
    let solvedChallenges = new Set(JSON.parse(localStorage.getItem("solvedChallenges") || "[]"));
    let filteredChallenges = [];
    let currentStudyPlan = localStorage.getItem("currentStudyPlan") || null;
    let streak = parseInt(localStorage.getItem("streak") || "0");
    let lastSolvedDate = localStorage.getItem("lastSolvedDate");
    let achievements = JSON.parse(localStorage.getItem("achievements") || "[]");

    // Timer state
    let timerInterval;
    let timeRemaining = 25 * 60; // 25 minutes in seconds
    let isTimerRunning = false;

    // Achievement system
    const achievementDefinitions = [
      { id: 'first_solve', name: 'First Steps', description: 'Solved your first challenge', icon: '🎯', threshold: 1 },
      { id: 'five_solved', name: 'Getting Started', description: 'Solved 5 challenges', icon: '🚀', threshold: 5 },
      { id: 'ten_solved', name: 'On Fire', description: 'Solved 10 challenges', icon: '🔥', threshold: 10 },
      { id: 'twenty_solved', name: 'Dedicated Learner', description: 'Solved 20 challenges', icon: '📚', threshold: 20 },
      { id: 'fifty_solved', name: 'Code Master', description: 'Solved 50 challenges', icon: '⚡', threshold: 50 },
      { id: 'easy_master', name: 'Easy Master', description: 'Completed all easy challenges', icon: '🟢', threshold: 'all_easy' },
      { id: 'medium_master', name: 'Medium Master', description: 'Completed all medium challenges', icon: '🟡', threshold: 'all_medium' },
      { id: 'hard_master', name: 'Hard Master', description: 'Completed all hard challenges', icon: '🔴', threshold: 'all_hard' },
      { id: 'week_streak', name: 'Week Warrior', description: '7 day solving streak', icon: '📅', threshold: 'streak_7' },
      { id: 'month_streak', name: 'Monthly Champion', description: '30 day solving streak', icon: '🏆', threshold: 'streak_30' }
    ];

    // DOM elements
    const challengeGrid = document.getElementById("challengeGrid");
    const difficultyFilter = document.getElementById("difficultyFilter");
    const searchInput = document.getElementById("searchInput");
    const themeToggle = document.getElementById("themeToggle");
    const emptyState = document.getElementById("emptyState");
    const sectionTitle = document.getElementById("sectionTitle");
    const sectionSubtitle = document.getElementById("sectionSubtitle");
    const timerDisplay = document.getElementById("timerDisplay");
    const startTimer = document.getElementById("startTimer");
    const pauseTimer = document.getElementById("pauseTimer");
    const resetTimer = document.getElementById("resetTimer");
    const achievementNotification = document.getElementById("achievementNotification");
    const achievementText = document.getElementById("achievementText");
    const streakCount = document.getElementById("streakCount");

    // Initialize the application
    function init() {
      setupEventListeners();
      updateStats();
      renderChallenges();
      updateProgress();
      updateStreak();
      renderAchievements();
      setupStudyPlan();
      setupTimer();
    }

    // Event listeners
    function setupEventListeners() {
      // Tab switching
      document.querySelectorAll(".tab").forEach(tab => {
        tab.addEventListener("click", () => {
          document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
          tab.classList.add("active");
          currentCategory = tab.dataset.category;
          updateSectionHeader();
          renderChallenges();
        });
      });

      // Filters
      difficultyFilter.addEventListener("change", renderChallenges);
      searchInput.addEventListener("input", debounce(renderChallenges, 300));

      // Theme toggle
      themeToggle.addEventListener("click", toggleTheme);

      // Study plan selection
      document.querySelectorAll(".plan-card").forEach(card => {
        card.addEventListener("click", () => {
          document.querySelectorAll(".plan-card").forEach(c => c.classList.remove("selected"));
          card.classList.add("selected");
          currentStudyPlan = card.dataset.plan;
          localStorage.setItem("currentStudyPlan", currentStudyPlan);
          showAchievement(`Study plan selected: ${card.querySelector('.plan-name').textContent}`);
        });
      });

      // Load saved theme
      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark");
        themeToggle.textContent = "☀️";
      }
    }

    // Study Plan Setup
    function setupStudyPlan() {
      if (currentStudyPlan) {
        const selectedCard = document.querySelector(`[data-plan="${currentStudyPlan}"]`);
        if (selectedCard) {
          selectedCard.classList.add("selected");
        }
      }
    }

    // Timer Setup and Functions
    function setupTimer() {
      // Timer controls
      startTimer.addEventListener("click", startPomodoroTimer);
      pauseTimer.addEventListener("click", pausePomodoroTimer);
      resetTimer.addEventListener("click", resetPomodoroTimer);

      // Timer presets
      document.querySelectorAll(".preset-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const minutes = parseInt(btn.dataset.minutes);
          setTimer(minutes);
        });
      });

      updateTimerDisplay();
    }

    function startPomodoroTimer() {
      if (!isTimerRunning) {
        isTimerRunning = true;
        timerInterval = setInterval(() => {
          timeRemaining--;
          updateTimerDisplay();

          if (timeRemaining <= 0) {
            pausePomodoroTimer();
            showAchievement("Pomodoro session completed! 🍅");
            // Play notification sound would go here
            timeRemaining = 25 * 60; // Reset to 25 minutes
            updateTimerDisplay();
          }
        }, 1000);
      }
    }

    function pausePomodoroTimer() {
      isTimerRunning = false;
      if (timerInterval) {
        clearInterval(timerInterval);
      }
    }

    function resetPomodoroTimer() {
      pausePomodoroTimer();
      timeRemaining = 25 * 60;
      updateTimerDisplay();
    }

    function setTimer(minutes) {
      pausePomodoroTimer();
      timeRemaining = minutes * 60;
      updateTimerDisplay();
    }

    function updateTimerDisplay() {
      const minutes = Math.floor(timeRemaining / 60);
      const seconds = timeRemaining % 60;
      timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // Achievement System
    function checkAchievements() {
      const totalSolved = solvedChallenges.size;
      const allChallenges = Object.values(challenges).flat();

      achievementDefinitions.forEach(achievement => {
        if (achievements.includes(achievement.id)) return;

        let earned = false;

        if (typeof achievement.threshold === 'number' && totalSolved >= achievement.threshold) {
          earned = true;
        } else if (achievement.threshold === 'all_easy') {
          const easyChallenges = allChallenges.filter(c => c.difficulty === 'Easy');
          const solvedEasy = easyChallenges.filter(c => solvedChallenges.has(c.title));
          earned = solvedEasy.length === easyChallenges.length && easyChallenges.length > 0;
        } else if (achievement.threshold === 'all_medium') {
          const mediumChallenges = allChallenges.filter(c => c.difficulty === 'Medium');
          const solvedMedium = mediumChallenges.filter(c => solvedChallenges.has(c.title));
          earned = solvedMedium.length === mediumChallenges.length && mediumChallenges.length > 0;
        } else if (achievement.threshold === 'all_hard') {
          const hardChallenges = allChallenges.filter(c => c.difficulty === 'Hard');
          const solvedHard = hardChallenges.filter(c => solvedChallenges.has(c.title));
          earned = solvedHard.length === hardChallenges.length && hardChallenges.length > 0;
        } else if (achievement.threshold === 'streak_7' && streak >= 7) {
          earned = true;
        } else if (achievement.threshold === 'streak_30' && streak >= 30) {
          earned = true;
        }

        if (earned) {
          achievements.push(achievement.id);
          localStorage.setItem("achievements", JSON.stringify(achievements));
          showAchievement(`Achievement Unlocked: ${achievement.name}! ${achievement.icon}`);
        }
      });
    }

    function showAchievement(text) {
      achievementText.textContent = text;
      achievementNotification.classList.add("show");

      setTimeout(() => {
        achievementNotification.classList.remove("show");
      }, 4000);
    }

    function renderAchievements() {
      const achievementsList = document.getElementById("achievementsList");
      achievementsList.innerHTML = "";

      const earnedAchievements = achievementDefinitions.filter(a => achievements.includes(a.id));

      if (earnedAchievements.length === 0) {
        achievementsList.innerHTML = `
          <div style="text-align: center; padding: 2rem; opacity: 0.6;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">🏆</div>
            <p>Start solving challenges to unlock achievements!</p>
          </div>
        `;
        return;
      }

      earnedAchievements.forEach(achievement => {
        const achievementEl = document.createElement("div");
        achievementEl.className = "leaderboard-item";
        achievementEl.innerHTML = `
          <div style="font-size: 2rem; margin-right: 1rem;">${achievement.icon}</div>
          <div style="flex: 1;">
            <div style="font-weight: 700; font-size: 1.1rem;">${achievement.name}</div>
            <div style="opacity: 0.7;">${achievement.description}</div>
          </div>
          <div style="background: var(--success); color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem;">
            Earned
          </div>
        `;
        achievementsList.appendChild(achievementEl);
      });
    }

    // Streak Management
    function updateStreak() {
      const today = new Date().toDateString();
      const yesterday = new Date(Date.now() - 86400000).toDateString();

      // Load stored values
      let lastSolvedDate = localStorage.getItem("lastSolvedDate");
      let streak = parseInt(localStorage.getItem("streak") || "0");
      let lastSolvedCount = parseInt(localStorage.getItem("lastSolvedCount") || "0");

      // ✅ Case 1: Solved today already
      if (lastSolvedDate === today) {
        // Do nothing, streak stays same
      }
      // ✅ Case 2: Solved yesterday → continue streak
      else if (lastSolvedDate === yesterday) {
        if (solvedChallenges.size > lastSolvedCount) {
          streak++;
          localStorage.setItem("streak", streak.toString());
          localStorage.setItem("lastSolvedDate", today);
          localStorage.setItem("lastSolvedCount", solvedChallenges.size.toString());
        }
      }
      // ✅ Case 3: Missed days → reset streak
      else {
        if (solvedChallenges.size > lastSolvedCount) {
          streak = 1; // new streak
        } else {
          streak = 0; // no new solve
        }
        localStorage.setItem("streak", streak.toString());
        localStorage.setItem("lastSolvedDate", today);
        localStorage.setItem("lastSolvedCount", solvedChallenges.size.toString());
      }

      // Update UI
      streakCount.textContent = streak;
    }


    // Debounce function for search
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Toggle theme
    function toggleTheme() {
      const isDark = document.body.classList.toggle("dark");
      themeToggle.textContent = isDark ? "☀️" : "🌙";
      localStorage.setItem("darkMode", isDark);
    }

    // Update section header based on category
    function updateSectionHeader() {
      const categoryTitles = {
        all: "All Challenges",
        arrays: "Array Challenges",
        strings: "String Challenges",
        linkedlist: "Linked List Challenges",
        trees: "Tree Challenges",
        graphs: "Graph Challenges",
        dp: "Dynamic Programming Challenges",
        system: "System Design Challenges"
      };

      const categorySubtitles = {
        all: "Choose your next coding adventure",
        arrays: "Master array manipulation and algorithms",
        strings: "Conquer string processing challenges",
        linkedlist: "Navigate through pointer-based structures",
        trees: "Climb the hierarchy of tree problems",
        graphs: "Explore connected data relationships",
        dp: "Optimize with dynamic programming patterns",
        system: "Design scalable systems and data structures"
      };

      sectionTitle.textContent = categoryTitles[currentCategory];
      sectionSubtitle.textContent = categorySubtitles[currentCategory];
    }

    // Get all challenges or filtered by category
    function getAllChallenges() {
      if (currentCategory === "all") {
        return Object.values(challenges).flat();
      }
      return challenges[currentCategory] || [];
    }

    // Render challenges
    function renderChallenges() {
      const allChallenges = getAllChallenges();
      const difficultyValue = difficultyFilter.value;
      const searchValue = searchInput.value.toLowerCase().trim();

      // Filter challenges
      filteredChallenges = allChallenges.filter(challenge => {
        const matchesDifficulty = !difficultyValue || challenge.difficulty === difficultyValue;
        const matchesSearch = !searchValue ||
          challenge.title.toLowerCase().includes(searchValue) ||
          challenge.description.toLowerCase().includes(searchValue) ||
          challenge.tags.some(tag => tag.toLowerCase().includes(searchValue));

        return matchesDifficulty && matchesSearch;
      });

      // Clear grid
      challengeGrid.innerHTML = "";

      if (filteredChallenges.length === 0) {
        emptyState.classList.remove("hidden");
        challengeGrid.classList.add("hidden");
        return;
      }

      emptyState.classList.add("hidden");
      challengeGrid.classList.remove("hidden");

      // Render each challenge
      filteredChallenges.forEach((challenge, index) => {
        const card = createChallengeCard(challenge, index);
        challengeGrid.appendChild(card);
      });
    }

    // Create challenge card
    function createChallengeCard(challenge, index) {
      const card = document.createElement("div");
      card.className = "card fade-in";
      card.style.animationDelay = `${index * 0.1}s`;

      const isSolved = solvedChallenges.has(challenge.title);

      card.innerHTML = `
        <div class="card-header">
          <div>
            <h3 class="card-title">${challenge.title}</h3>
            <p class="card-description">${challenge.description}</p>
          </div>
          ${isSolved ? '<div class="solved-indicator">✓</div>' : ''}
        </div>
        
        <div class="card-tags">
          ${challenge.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
        </div>
        
        <div class="badge ${challenge.difficulty.toLowerCase()}">
          ${getDifficultyIcon(challenge.difficulty)} ${challenge.difficulty}
        </div>
        
        <div class="card-actions">
          <div class="checkbox-wrapper" onclick="toggleSolved('${challenge.title}', '${challenge.difficulty}')">
            <div class="checkbox ${isSolved ? 'checked' : ''}"></div>
            <span class="checkbox-label">Mark as solved</span>
          </div>
          <a href="${challenge.link}" target="_blank" rel="noopener noreferrer" class="external-btn">
            Solve Now <span>→</span>
          </a>
        </div>
      `;

      return card;
    }

    // Get difficulty icon
    function getDifficultyIcon(difficulty) {
      const icons = {
        Easy: "🟢",
        Medium: "🟡",
        Hard: "🔴"
      };
      return icons[difficulty] || "⚪";
    }

    // Toggle solved status
    function toggleSolved(title, difficulty) {
      const wasAlreadySolved = solvedChallenges.has(title);

      if (wasAlreadySolved) {
        solvedChallenges.delete(title);
        showAchievement(`Unmarked: ${title}`);
      } else {
        solvedChallenges.add(title);
        showAchievement(`Great job! ${title} completed! 🎉`);

        // Update streak
        const today = new Date().toDateString();
        if (lastSolvedDate !== today) {
          localStorage.setItem("lastSolvedDate", today);
          updateStreak();
        }
      }

      localStorage.setItem("solvedChallenges", JSON.stringify([...solvedChallenges]));
      updateStats();
      updateProgress();
      renderChallenges();
      checkAchievements();
      renderAchievements();
    }

    // Update stats in header
    function updateStats() {
      const totalChallenges = Object.values(challenges).flat().length;
      const totalSolved = solvedChallenges.size;

      document.getElementById("totalSolved").textContent = totalSolved;
      document.getElementById("totalChallenges").textContent = totalChallenges;
    }

    // Update progress section
    function updateProgress() {
      const allChallenges = Object.values(challenges).flat();
      const solvedByDifficulty = {
        Easy: 0,
        Medium: 0,
        Hard: 0
      };
      const totalByDifficulty = {
        Easy: 0,
        Medium: 0,
        Hard: 0
      };

      // Count challenges by difficulty
      allChallenges.forEach(challenge => {
        totalByDifficulty[challenge.difficulty]++;
        if (solvedChallenges.has(challenge.title)) {
          solvedByDifficulty[challenge.difficulty]++;
        }
      });

      // Update progress cards
      Object.keys(solvedByDifficulty).forEach(difficulty => {
        const solved = solvedByDifficulty[difficulty];
        const total = totalByDifficulty[difficulty];
        const percentage = total > 0 ? Math.round((solved / total) * 100) : 0;

        document.getElementById(`${difficulty.toLowerCase()}Count`).textContent = solved;
        document.getElementById(`${difficulty.toLowerCase()}Progress`).style.width = `${percentage}%`;
      });

      // Update overall progress
      const totalSolved = solvedChallenges.size;
      const totalChallenges = allChallenges.length;
      const overallPercentage = totalChallenges > 0 ? Math.round((totalSolved / totalChallenges) * 100) : 0;

      document.getElementById("overallProgress").textContent = `${overallPercentage}%`;
      document.getElementById("overallProgressBar").style.width = `${overallPercentage}%`;
    }

    // Make toggleSolved globally accessible
    window.toggleSolved = toggleSolved;

    // Initialize app when DOM is loaded
    document.addEventListener("DOMContentLoaded", init);

    // Handle page visibility for timer
    document.addEventListener("visibilitychange", () => {
      if (document.hidden && isTimerRunning) {
        // Optional: pause timer when page is hidden
      }
    });

    // Keyboard shortcuts
    document.addEventListener("keydown", (e) => {
      // Ctrl/Cmd + K to focus search
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        searchInput.focus();
      }

      // Escape to clear search
      if (e.key === 'Escape' && document.activeElement === searchInput) {
        searchInput.value = '';
        renderChallenges();
        searchInput.blur();
      }
    });

    // Add some motivational messages
    const motivationalMessages = [
      "Keep coding! Every expert was once a beginner! 💪",
      "You're making great progress! 🌟",
      "Consistency is key to mastering algorithms! 🔑",
      "Challenge yourself - that's where growth happens! 🚀",
      "Debugging is like being a detective! 🕵️",
      "Code is poetry written in logic! 📝",
      "Every bug you fix makes you stronger! 🐛➡️💪",
      "Think twice, code once! 🤔",
      "Great code is not about perfection, but progression! ⬆️"
    ];

    // Show random motivational message occasionally
    function showMotivationalMessage() {
      if (Math.random() < 0.3) { // 30% chance
        const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
        setTimeout(() => showAchievement(message), 2000);
      }
    }

    // Call motivational message when user solves challenges
    const originalToggleSolved = toggleSolved;
    window.toggleSolved = function (title, difficulty) {
      originalToggleSolved(title, difficulty);
      if (solvedChallenges.has(title)) {
        setTimeout(showMotivationalMessage, 3000);
      }
    };
  </script>
</body>

</html>